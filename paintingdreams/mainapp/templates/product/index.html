{% extends "mainapp_base.html" %}

{% block content %}
<h1>{{ pagetitle }}</h1>
{% if first_generation_product_types %}
  <ul>
  {% for product_type in first_generation_product_types %}
    {% if not product_type.subproduct_hide %}
      <li><a href="{% url 'product_index' product_type.slug %}">{{ product_type.title }}s</a></li>
    {% endif %}
  {% endfor %}
  </ul>
{% endif %}
{% if products %}
    <div class="row gallery">
    {% for product in products %}
        <div class="col-md-3">
        {% if product.image %}
            <a class="thumbnail" href="{% url 'product_detail' product.image.slug %}__{{ product.product_type.slug }}">
        {% endif %}
        {% if not product.image %}
            <a class="thumbnail" href="{% url 'product_detail' product.product_type.slug %}">
        {% endif %}
            {% with webimage=product.webimages.first %}
                <img class="galleryitem-thumbnail" src="/media/images/thumbnail/{{ webimage.filename }}" alt="{{ webimage.name }}" />
            {% endwith %}
            <div class="caption">
                <p>
                    {% if product.image %}{{ product.image.title }} - {% endif %}
                    {{ product.product_type.displayname_final }}
                </p>
            </div>
        </a>
        </div>
    {% endfor %}
    </div>
{% else %}
    <p>No products found</p>
{% endif %}
{% endblock %}
